<%
  extras_list = @items

  extras_export_list = [
    {
      title:   'API Reference',
      id:      '_index',
      group:   '',
      headers: [
        {
          anchor: 'modules',
          id:     'Modules',
        },
      ],
    },
  ]

  extras_groups_lists = generate_groups_lists(groups: config[:groups_for_extras])

  extras_list.each do |el|
    el_groups = match_groups(groups: config[:groups_for_extras], value: el.filename)
    el_groups.each do |group_name|
      extras_groups_lists[group_name] << {
        title:   el.name,
        id:      url_for(el).gsub(/\.html$/, ''),
        group:   group_name,
        headers: [],
      }
    end
  end

  extras_export_list = extras_groups_lists
    .map { |_, list| list }
    .flatten
%>

<%
  modules_list = Registry.all(:class, :module)
  modules_list = run_verifier(modules_list)
  modules_list = modules_list
    .map { |el| ["#{el.namespace.path.size > 0 ? "#{el.namespace.path}::" : '' }#{el.name}", el] }
    .sort_by { |name, el| name }

  modules_groups_lists = generate_groups_lists(groups: config[:groups_for_modules])

  modules_list.each do |full_path, el|
    el_groups = match_groups(groups: config[:groups_for_modules], value: full_path)
    el_groups.each do |group_name|
      modules_groups_lists[group_name] << {
        title:   full_path,
        id:      url_for(el).gsub(/\.html$/, ''),
        group:   group_name,
        headers: [],
      }
    end
  end

  modules_export_list = modules_groups_lists
    .map { |_, list| list }
    .flatten
%>

sidebarNodes = {
  "extras":  <%= JSON.pretty_generate(extras_export_list) %>,
  "modules": <%= JSON.pretty_generate(modules_export_list) %>,
};